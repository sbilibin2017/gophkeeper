@startuml
actor Client
participant "API Server" as Server
participant JWT
database "users" as Users
database "devices" as Devices

Client -> Server: POST /login {username, password, device_id}
Server -> Users: Check if user exists and verify password
Server -> Devices: Check if device exists for user
Server -> JWT: GenerateToken({user_id, device_id})
JWT --> Server: token
Server --> Client: {token}

@enduml

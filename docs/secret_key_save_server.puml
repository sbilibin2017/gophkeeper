@startuml
actor Client
participant "API Server" as Server
participant SecretKeyTokenDecoder
participant SecretKeyWriter
participant models

Client -> Server: POST /secret-key/save {secretKeyRequest}
Server -> SecretKeyTokenDecoder: GetFromRequest(req)
SecretKeyTokenDecoder --> Server: tokenString

Server -> SecretKeyTokenDecoder: Parse(tokenString)
SecretKeyTokenDecoder --> Server: claims

Server -> Server: Decode SecretKeyRequest JSON
Server -> Server: Build SecretKeyDB object
Server -> SecretKeyWriter: Save(ctx, secretKey)
SecretKeyWriter --> Server: saved

Server --> Client: 200 OK
@enduml